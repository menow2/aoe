"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var items,observer,mutations,speed,delay,animation,options={selectors:{name:"data-aoe",main:"[data-aoe]",speed:"data-aoe-speed",delay:"data-aoe-delay"},root:null,rootMargin:"0px",once:!1,speed:null,timing:null,delay:null,transitions:!1,mutationsListener:null,callback:null},ms="ms",aoe=function(e){e&&e!==options&&(options=_objectSpread({},options,e)),items=document.querySelectorAll(options.selectors.main),null!=options.mutationsListener&&createMutation(options.mutationsListener),items.forEach(function(e){speed=null!==options.speed?options.speed+ms:e.getAttribute(options.selectors.speed)+ms,delay=null!==options.delay?options.delay+ms:e.getAttribute(options.selectors.delay)+ms,e.style.animationDuration=speed,e.style.animationDelay=delay,createIntersection(e),1==options.transitions&&(e.style.transitionDuration=speed,e.style.transitionDelay=delay),null!==options.timing&&(e.style.animationTimingFunction=options.timing)})},createIntersection=function(e){var t={root:options.root,rootMargin:options.rootMargin,threshold:.5};(observer=new IntersectionObserver(handleIntersect,t)).observe(e)},animate=function(e,t){console.log(t),animation=e.target.getAttribute(options.selectors.name),.5<=e.intersectionRatio?e.target.classList.add(animation):1!=options.once&&e.target.classList.remove(animation),1==options.once&&observer.unobserve(e.target)},handleIntersect=function(e){e.forEach(function(e){(console.log(e.intersectionRatio),1==e.isIntersecting?animate(e,!0):1!=options.once&&animate(e,!1),null!==options.callback)&&(0,options.callback)(e)})},createMutation=function(e){(mutations=new MutationObserver(handleMutation)).observe(e,{false:!0,childList:!0,characterData:!1})},handleMutation=function(e){var t=e[0].addedNodes[0],n=t.querySelectorAll(options.selectors.main)[0];t&&createIntersection(n||t)};if(!window.IntersectionObserver)throw Error("\n    Your browser does not support IntersectionObserver!\n    https://github.com/w3c/IntersectionObserver/tree/master/polyfill\n    ");